# **MCP Crypto Market Data Server**

A lightweight, modular **Python MCP server** that provides:

* **Real-time cryptocurrency prices**
* **Historical OHLCV data**
* **Exchange-normalized symbol handling**
* **Error handling & validation**
* **In-memory TTL caching**
* **FastAPI-based API endpoints**
* **Unit tests for reliability**

This project is built as part of the internship assignment and focuses on clean structure, correctness, and essential MCP features â€” without unnecessary complexity.

---

## ğŸš€ **Features**

### âœ” Real-time market data

Fetches live crypto prices using **CCXT**, supporting major exchanges like Binance, CoinbasePro, and Kraken.

### âœ” Historical OHLCV data

Pulls candlestick data (1m, 5m, 1h, 1d etc.) with configurable limits.

### âœ” TTL Cache

Improves performance by caching exchange responses for a short duration.

### âœ” Robust error handling

Fails gracefully for:

* invalid exchange
* invalid trading pair (symbol)
* unreachable API
* malformed query parameters

### âœ” Simple structure

Organized for clarity and easy extension with more exchanges or endpoints.

### âœ” Full unit tests

Handlers, server routes, and utilities are tested with mocks â€” ensuring high reliability.

---

## ğŸ—‚ **Project Structure**

```
mcp-crypto-server/
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ mcp_server/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ server.py          # FastAPI app + route wiring
â”‚   â”œâ”€â”€ handlers.py        # CCXT logic + business logic
â”‚   â”œâ”€â”€ cache.py           # Tiny TTL cache
â”‚   â”œâ”€â”€ exceptions.py      # Custom error classes
â”‚   â””â”€â”€ utils.py           # Normalization + validation helpers
â””â”€â”€ tests/
    â”œâ”€â”€ test_handlers.py
    â””â”€â”€ test_server.py
```

---

## ğŸ”§ **Installation**

### 1. Clone the repository

```bash
git clone https://github.com/<your-username>/mcp-crypto-server.git
cd mcp-crypto-server
```

### 2. Create a virtual environment

```bash
python -m venv .venv
```

### 3. Activate the virtual environment

**Windows PowerShell**

```powershell
.\.venv\Scripts\Activate
```

### 4. Install dependencies

```bash
pip install -r requirements.txt
```

---

## â–¶ï¸ **Running the Server**

Use Uvicorn to start:

```bash
python -m uvicorn mcp_server.server:app --reload --host 127.0.0.1 --port 8000
```

---

## ğŸ“¡ **API Endpoints**

### **1. Health Check**

```
GET /ping
```

Response:

```json
{ "status": "ok" }
```

---

### **2. Real-Time Price**

```
GET /price?exchange=binance&symbol=BTC/USDT
```

Response:

```json
{
  "exchange": "binance",
  "symbol": "BTC/USDT",
  "price": 57382.15
}
```

---

### **3. Historical OHLCV**

```
GET /ohlcv?exchange=binance&symbol=BTC/USDT&limit=50
```

Response:

```json
{
  "exchange": "binance",
  "symbol": "BTC/USDT",
  "timeframe": "1m",
  "data": [...]
}
```

---

## ğŸ§ª **Running Tests**

Install pytest (already in requirements) and run:

```bash
pytest -q
```

Tests include:

* handler logic
* error cases
* server routes
* ccxt mock responses

---

## ğŸ“ **Assumptions**

* Default timeframe is **1m** unless specified.
* Symbols are normalized to `BASE/QUOTE` format.
* TTL cache uses small expiration (5â€“10 seconds) suitable for crypto tickers.
* Only widely used exchanges are supported (Binance, Kraken, Coinbase Pro etc.).

---

## ğŸŒ± **Extending the Project**

You can easily add:

* more exchanges
* WebSocket real-time streaming
* rate limiting
* Redis/memory caching
* additional MCP tools

## ğŸ“¬ **Submission**

This project is developed for the internship coding assignment.
Upload to GitHub and share the repository link by **Nov 16, 2025**.

